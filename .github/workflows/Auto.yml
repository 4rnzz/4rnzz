name: chaotic green graph

on:
  workflow_dispatch:  # Jalan manual saja, cukup sekali

jobs:
  chaos_fill:
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
      - name: Checkout repo
        uses: actions/checkout@v4

      - name: Set up git config
        run: |
          git config --global user.name "4rnzz"
          git config --global user.email "sellrnzz@gmail.com"  # Pastikan email cocok

      - name: Generate chaotic commits
        run: |
          DAYS=365
          for i in $(seq 0 $DAYS); do
            DATE=$(date -d "$i days ago" +%Y-%m-%d)
            
            # 50% kemungkinan hari ini akan diisi commit
            if [ $((RANDOM % 2)) -eq 0 ]; then
              echo "Skipping $DATE"
              continue
            fi

            # Kalau dipilih, commit sebanyak 5â€“50 kali
            COUNT=$((RANDOM % 46 + 5))
            echo "Committing $COUNT times for $DATE"

            for j in $(seq 1 $COUNT); do
              echo "$DATE chaos commit $j" >> Commit.txt
              git add Commit.txt
              GIT_COMMITTER_DATE="$DATE 12:00:00" \
              GIT_AUTHOR_DATE="$DATE 12:00:00" \
              git commit -m "chaos commit: $DATE #$j"
            done
          done
          git push
